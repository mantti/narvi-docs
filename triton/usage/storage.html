

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Storage &mdash; Aalto scientific computing</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="Aalto scientific computing" href="../../index.html"/>
        <link rel="up" title="Triton user guide" href="../index.html"/>
        <link rel="next" title="Compilers and toolchains" href="toolchains.html"/>
        <link rel="prev" title="Small files" href="smallfiles.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Aalto scientific computing
          

          
            
            <img src="../../_static/aalto.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../aalto/welcomeresearchers.html">Welcome, researchers!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aalto/welcomestudents.html">Welcome, students!</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../news/index.html">News</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../aalto/index.html">The Aalto environment</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data/index.html">Data</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Triton user guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#quick-contents-and-links">Quick contents and links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#tutorials">Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#detailed-instructions">Detailed instructions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="compilers.html">Available compilers</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgx.html">Nvidia DGX machines</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
<li class="toctree-l3"><a class="reference internal" href="general.html">Running programs on Triton</a></li>
<li class="toctree-l3"><a class="reference internal" href="gpu.html">GPU Computing</a></li>
<li class="toctree-l3"><a class="reference internal" href="grid.html">Grid computing</a></li>
<li class="toctree-l3"><a class="reference internal" href="grid2.html">Grid computing 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="jobs.html">Monitoring jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="libs.html">Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="localstorage.html">Storage: local drives</a></li>
<li class="toctree-l3"><a class="reference internal" href="lustre.html">Storage: Lustre (scratch)</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpilibs.html">MPI on Triton</a></li>
<li class="toctree-l3"><a class="reference internal" href="profiling.html">Profiling</a></li>
<li class="toctree-l3"><a class="reference internal" href="quotas.html">Quotas</a></li>
<li class="toctree-l3"><a class="reference internal" href="singularity.html">Singularity Containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="smallfiles.html">Small files</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#checklist">Checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="#checking-your-stats">Checking your stats</a></li>
<li class="toctree-l4"><a class="reference internal" href="#loading-data-for-machine-learning">Loading data for machine learning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="toolchains.html">Compilers and toolchains</a></li>
<li class="toctree-l3"><a class="reference internal" href="workflows.html">Remote workflows at Aalto</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#applications">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#reference-and-examples">Reference and Examples</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../scicomp/index.html">Scientific computing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../training/index.html">Training</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">About these docs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Aalto scientific computing</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Triton user guide</a> &raquo;</li>
      
    <li>Storage</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/AaltoScienceIT/scicomp-docs/blob/master/triton/usage/storage.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="storage">
<h1>Storage<a class="headerlink" href="#storage" title="Permalink to this headline">¶</a></h1>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p>The <a class="reference internal" href="../tut/storage.html"><em>storage tutorial</em></a> is a prerequisite.</p>
<p>These pages are also related and include solutions to common
storage problems:</p>
<ul class="last simple">
<li><a class="reference internal" href="lustre.html"><em>Storage: Lustre (scratch)</em></a></li>
<li><a class="reference internal" href="localstorage.html"><em>Storage: local drives</em></a></li>
<li><a class="reference internal" href="quotas.html"><em>Quotas</em></a></li>
<li><a class="reference internal" href="smallfiles.html"><em>Small files</em></a></li>
</ul>
</div>
<p>This pages gives an overview of more advanced storage topics.  You
should read the <a class="reference internal" href="../tut/storage.html"><em>storage tutorial</em></a> first.</p>
<div class="section" id="checklist">
<h2>Checklist<a class="headerlink" href="#checklist" title="Permalink to this headline">¶</a></h2>
<p>Do any of these apply to you?  If so, consider your situation and ask
us for help!</p>
<p>If you have been sent this checklist because your jobs may be having
a lot of IO, don&#8217;t worry.  It&#8217;s not <em>necessarily</em> a problem but please
go through this checklist and let us know what applies to you so we
can give some recommendations.</p>
<ul class="simple">
<li>Many small files being accessed in jobs (hundred or more).</li>
<li>Files with extremely random access, in particular databases or
database-like things (hdf5).</li>
<li>Files being read over and over again.  Alternatives: copy to local
disks, or read once and store in memory.</li>
<li>Number of files growing, for example all your runs have separate
input files, output files, Slurm output files, and you have many runs.</li>
<li>Constantly logging to certain files, writing to files from many
parallel jobs at the same time.</li>
<li>Reading from single files from many parallel jobs or threads at the
same time.</li>
<li>Is all your IO concatenated at one point, or spread out over the
whole job?</li>
</ul>
<p>( and if we&#8217;ve asked you specifically about your jobs, could you also
describe what kind of job it is, the type of disk read and write
happens, and in what kinds of pattern?  Many small files, a few large
ones, reading same files over and over, etc.  How&#8217;s it spread out
across jobs? )</p>
<p>If you think your IO may have bad patterns or even you just want to
talk to make sure, let one of the Triton staff know or submit an issue
in the issue tracker.</p>
</div>
<div class="section" id="checking-your-stats">
<h2>Checking your stats<a class="headerlink" href="#checking-your-stats" title="Permalink to this headline">¶</a></h2>
<p>You can check the total disk read and write of your past jobs using:</p>
<div class="highlight-python"><div class="highlight"><pre># All your recent jobs:
sacct -o jobid%10,user%8,jobname%10,NodeList,MaxDiskRead,MaxDiskWrite -u $USER
# A single jobid
sacct -o jobid%10,user%8,jobname%10,NodeList,MaxDiskRead,MaxDiskWrite -j $jobid
</pre></div>
</div>
<p>(we will add more tools to this later)</p>
</div>
<div class="section" id="loading-data-for-machine-learning">
<h2>Loading data for machine learning<a class="headerlink" href="#loading-data-for-machine-learning" title="Permalink to this headline">¶</a></h2>
<p>As we&#8217;ve said before, modern GPUs are super data-hungry when used for
machine learning.  If you try to open many files to feed it the data,
&#8220;you&#8217;re going to have a bad time&#8221;.  Luckily, different packages have
different solutions to the problem.</p>
<p>In general, at least try to combine all of your input data into some
sort of single file that can be read in sequence.</p>
<p>Try to do the least amount of work possible in the core training
loops: any CPU usage, print, logging, preprocessing, postprocessing,
etc. reduces the amount of time the GPU is working unless you
do it properly (Amdhal&#8217;s law).</p>
<ul class="simple">
<li>Tensorflow: <a class="reference external" href="https://www.tensorflow.org/guide/data_performance">data input pipelines</a></li>
</ul>
<p>(more coming later)</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="toolchains.html" class="btn btn-neutral float-right" title="Compilers and toolchains" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="smallfiles.html" class="btn btn-neutral" title="Small files" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Aalto Science-IT.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/redirect-to-https.js"></script>
      <script type="text/javascript" src="https://users.aalto.fi/~darstr1/minipres-stable.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Available compilers &mdash; Aalto scientific computing</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="Aalto scientific computing" href="../../index.html"/>
        <link rel="up" title="Triton user guide" href="../index.html"/>
        <link rel="next" title="Debugging" href="debugging.html"/>
        <link rel="prev" title="Job dependencies" href="../tut/dependency.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Aalto scientific computing
          

          
            
            <img src="../../_static/aalto.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../aalto/welcomeresearchers.html">Welcome, researchers!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aalto/welcomestudents.html">Welcome, students!</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../news/index.html">News</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../aalto/index.html">The Aalto environment</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data/index.html">Data</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Triton user guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#quick-contents-and-links">Quick contents and links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#tutorials">Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#detailed-instructions">Detailed instructions</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="">Available compilers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#gcc">GCC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#intel-compilers">Intel Compilers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgx.html">Nvidia DGX machines</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
<li class="toctree-l3"><a class="reference internal" href="general.html">Running programs on Triton</a></li>
<li class="toctree-l3"><a class="reference internal" href="gpu.html">GPU Computing</a></li>
<li class="toctree-l3"><a class="reference internal" href="grid.html">Grid computing</a></li>
<li class="toctree-l3"><a class="reference internal" href="grid2.html">Grid computing 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="jobs.html">Monitoring jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="libs.html">Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="localstorage.html">Storage: local drives</a></li>
<li class="toctree-l3"><a class="reference internal" href="lustre.html">Storage: Lustre (scratch)</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpilibs.html">MPI on Triton</a></li>
<li class="toctree-l3"><a class="reference internal" href="profiling.html">Profiling</a></li>
<li class="toctree-l3"><a class="reference internal" href="quotas.html">Quotas</a></li>
<li class="toctree-l3"><a class="reference internal" href="singularity.html">Singularity Containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="smallfiles.html">Small files</a></li>
<li class="toctree-l3"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="toolchains.html">Compilers and toolchains</a></li>
<li class="toctree-l3"><a class="reference internal" href="workflows.html">Remote workflows at Aalto</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#applications">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#reference-and-examples">Reference and Examples</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../scicomp/index.html">Scientific computing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../training/index.html">Training</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">About these docs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Aalto scientific computing</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Triton user guide</a> &raquo;</li>
      
    <li>Available compilers</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/AaltoScienceIT/scicomp-docs/blob/master/triton/usage/compilers.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="available-compilers">
<h1>Available compilers<a class="headerlink" href="#available-compilers" title="Permalink to this headline">¶</a></h1>
<p>Please see full up to date&nbsp;listing of different toolchains and
compilers from  <a class="reference internal" href="../apps/index.html"><em>Applications</em></a>-page. This page
contains information on their usage.</p>
<div class="section" id="gcc">
<h2>GCC<a class="headerlink" href="#gcc" title="Permalink to this headline">¶</a></h2>
<p>Triton has the GCC set of compilers installed by default, but we
recommend that you use the provided module versions. The GNU Compiler
Collection (aka GCC) includes front ends for C, C+, Objective-C,
Fortran, Java, Ada, and Go, as well as libraries for these languages
(libstdc+, libgcj,...). In case of missing features,  <a class="reference internal" href="../help.html"><em>contact
admins</em></a>.</p>
<div class="highlight-python"><div class="highlight"><pre>$ gcc -v

Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/share/apps/easybuild/software/GCCcore/5.4.0/libexec/gcc/x86_64-unknown-linux-gnu/5.4.0/lto-wrapper
Target: x86_64-unknown-linux-gnu
Configured with: ../configure --enable-languages=c,c++,fortran --enable-lto --enable-checking=release --disable-multilib --enable-shared=yes --enable-static=yes --enable-threads=posix --enable-gold=default --enable-plugins --enable-ld --with-plugin-ld=ld.gold --enable-bootstrap --prefix=/share/apps/easybuild/software/GCCcore/5.4.0 --with-local-prefix=/share/apps/easybuild/software/GCCcore/5.4.0
Thread model: posix
gcc-versio 5.4.0 (GCC)
</pre></div>
</div>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre>$ gcc -lm -o my_code.c my_code  # compiling your C code and linking with Math lib
$ gfortran -O2 -o my_code  my_code.f90 # compiling your Fortran code with -O2 optimization level (see also g77 for Fortran 77)
$ g++ -O3 -funroll-loops -ffast-math -ftree-vectorize -mtune=native -o my_code  my_code.cpp # compiling your C++ code with aggressive optimizaton and architecture tuning
</pre></div>
</div>
<p>Thus GCC is the default compiler and is used to build most of the
software in the cluster.</p>
<p>See <code class="docutils literal"><span class="pre">man</span> <span class="pre">gcc</span></code>, <code class="docutils literal"><span class="pre">man</span> <span class="pre">gfortran</span></code> and other mans for options. Online
<a class="reference external" href="http://gcc.gnu.org/onlinedocs">GCC Documentation</a>.</p>
<div class="section" id="gcc-compiling-examples">
<h3>GCC compiling examples<a class="headerlink" href="#gcc-compiling-examples" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>$ cat hello.c
#include
int main(void) {
  printf(&quot;Hello World!&quot;);
  return 0;
}
$ gcc hello.c -o hello
</pre></div>
</div>
</div>
<div class="section" id="compiling-your-own-code">
<h3>Compiling your own code<a class="headerlink" href="#compiling-your-own-code" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Use gcc, g++, and gfortran compilers for compilation</li>
<li>Use mpicc, mpic++, and mpif90 for MPI (= MVAPICH, MPICH2 or OpenMPI +
GCC)</li>
<li>Setup your environment with <code class="docutils literal"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">&lt;toolchain&gt;</span></code> e.g. <code class="docutils literal"><span class="pre">module</span>
<span class="pre">load</span> <span class="pre">goolf/triton-2016b</span></code> for BLAS/LAPACK, FFTW3, ScaLAPACK+BLACS,
etc.. Modules will set <code class="docutils literal"><span class="pre">CPATH</span></code> and <code class="docutils literal"><span class="pre">LD_LIBRARY_PATH</span></code> variables for
<code class="docutils literal"><span class="pre">-I</span></code> and
<code class="docutils literal"><span class="pre">-L,</span> <span class="pre">but</span> <span class="pre">you</span> <span class="pre">can</span> <span class="pre">use</span> <span class="pre">'module</span> <span class="pre">show</span> <span class="pre">&lt;module&gt;'</span> <span class="pre">to</span> <span class="pre">see</span> <span class="pre">the</span> <span class="pre">exact</span> <span class="pre">library</span> <span class="pre">paths.</span></code></li>
</ul>
<p>MPI-code &#8220;mpihello.c&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre>#include
#include
int main (int argc, char **argv) {
  int rank, size;
  MPI_Init (&amp;argc, &amp;argv);
  printf( &quot;Hello world\n&quot;);
  MPI_Finalize();
  return 0;
}
</pre></div>
</div>
<p>Compile MPI code:</p>
<div class="highlight-python"><div class="highlight"><pre>module load goolf
mpicc mpihello.c -o mpihello
</pre></div>
</div>
</div>
<div class="section" id="optimization-options-for-gcc">
<h3>Optimization options for GCC<a class="headerlink" href="#optimization-options-for-gcc" title="Permalink to this headline">¶</a></h3>
<p>By default GCC/G++/GFortran do NOT perform any optimization; you must
add appropriate optimization flags yourself. Experiment and see what
works for your program!</p>
<ul class="simple">
<li>Basic optimization level: <code class="docutils literal"><span class="pre">-O2</span></code></li>
<li>More aggressive optimization, arch specific: <code class="docutils literal"><span class="pre">-O3</span> <span class="pre">-march=native</span></code></li>
<li>Might, or might not help:
<code class="docutils literal"><span class="pre">-O3</span> <span class="pre">-march=native</span> <span class="pre">-funroll-loops</span> <span class="pre">-ftree-loop-linear</span> <span class="pre">-fprefetch-loop-arrays</span></code></li>
</ul>
<p>Might help a lot, but potentially dangerous: <code class="docutils literal"><span class="pre">-ffast-math</span> <span class="pre">-mrecip</span></code></p>
<p>OpenMP with GCC: <code class="docutils literal"><span class="pre">-fopenmp</span></code></p>
<p>Note that using <code class="docutils literal"><span class="pre">-march=native</span></code> will produce an arch specific code.
Thus when compiled on Haswell, that code must be run on Haswell,
otherwise expect segmentation fault errors on other architectures.</p>
</div>
</div>
<div class="section" id="intel-compilers">
<h2>Intel Compilers<a class="headerlink" href="#intel-compilers" title="Permalink to this headline">¶</a></h2>
<p>Intel Composer available through  <code class="docutils literal"><span class="pre">module</span></code> provides full set of
compilers C/C++/Fortran. In addition, it comes with MKL libraries, that
works well in case you need LAPACK/BLAS functionality, as well as
paralle version of them with ScaLAPACK and BLACS.</p>
<p>Example of linking for Intel Composer + MKL + OpenMPI</p>
<div class="highlight-python"><div class="highlight"><pre>$ module load ioolf
$ mpif90 -o my.exe one.o two.o three.o libmpi_f90.a -lmkl_scalapack_lp64 -Wl,--start-group -lmkl_intel_lp64 -lmkl_sequential -lmkl_core  -lmkl_blacs_openmpi_lp64 -Wl,--end-group -lpthread -lm
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="debugging.html" class="btn btn-neutral float-right" title="Debugging" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../tut/dependency.html" class="btn btn-neutral" title="Job dependencies" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Aalto Science-IT.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/redirect-to-https.js"></script>
      <script type="text/javascript" src="https://users.aalto.fi/~darstr1/minipres-stable.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Libraries &mdash; Aalto scientific computing</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="Aalto scientific computing" href="../../index.html"/>
        <link rel="up" title="Triton user guide" href="../index.html"/>
        <link rel="next" title="Storage: local drives" href="localstorage.html"/>
        <link rel="prev" title="Monitoring jobs" href="jobs.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Aalto scientific computing
          

          
            
            <img src="../../_static/aalto.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../aalto/welcomeresearchers.html">Welcome, researchers!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aalto/welcomestudents.html">Welcome, students!</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../news/index.html">News</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../aalto/index.html">The Aalto environment</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data/index.html">Data</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Triton user guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#quick-contents-and-links">Quick contents and links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#tutorials">Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#detailed-instructions">Detailed instructions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="compilers.html">Available compilers</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgx.html">Nvidia DGX machines</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
<li class="toctree-l3"><a class="reference internal" href="general.html">Running programs on Triton</a></li>
<li class="toctree-l3"><a class="reference internal" href="gpu.html">GPU Computing</a></li>
<li class="toctree-l3"><a class="reference internal" href="grid.html">Grid computing</a></li>
<li class="toctree-l3"><a class="reference internal" href="grid2.html">Grid computing 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="jobs.html">Monitoring jobs</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Libraries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#blas">BLAS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lapack">LAPACK</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scalapack">Scalapack</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fft">FFT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#links">Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="localstorage.html">Storage: local drives</a></li>
<li class="toctree-l3"><a class="reference internal" href="lustre.html">Storage: Lustre (scratch)</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpilibs.html">MPI on Triton</a></li>
<li class="toctree-l3"><a class="reference internal" href="profiling.html">Profiling</a></li>
<li class="toctree-l3"><a class="reference internal" href="quotas.html">Quotas</a></li>
<li class="toctree-l3"><a class="reference internal" href="singularity.html">Singularity Containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="smallfiles.html">Small files</a></li>
<li class="toctree-l3"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="toolchains.html">Compilers and toolchains</a></li>
<li class="toctree-l3"><a class="reference internal" href="workflows.html">Remote workflows at Aalto</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#applications">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#reference-and-examples">Reference and Examples</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../scicomp/index.html">Scientific computing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../training/index.html">Training</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">About these docs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Aalto scientific computing</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Triton user guide</a> &raquo;</li>
      
    <li>Libraries</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/AaltoScienceIT/scicomp-docs/blob/master/triton/usage/libs.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="libraries">
<h1>Libraries<a class="headerlink" href="#libraries" title="Permalink to this headline">¶</a></h1>
<div class="section" id="blas">
<h2>BLAS<a class="headerlink" href="#blas" title="Permalink to this headline">¶</a></h2>
<p><strong>Basic Linear Algebra Subroutine</strong> (<strong>BLAS</strong>) is a <em>de facto</em>
application programming interface standard for publishing libraries to
perform basic linear algebra operations such as vector and matrix
multiplication (from wikipedia).</p>
<p>On triton a number of different BLAS implementations are available. The
recommended ones are <strong>MKL</strong> and <strong>OpenBLAS</strong>. Other available BLAS
libraries are ATLAS, GotoBLAS2 ,ACML, and the Netlib reference BLAS. For
benchmark results see</p>
<div class="highlight-python"><div class="highlight"><pre>DGEMM benchmark on triton
</pre></div>
</div>
<div class="section" id="using-mkl">
<h3>Using MKL<a class="headerlink" href="#using-mkl" title="Permalink to this headline">¶</a></h3>
<p>In order to use the MKL library you need to load the module. MKL is
provided both in the &#8220;mkl&#8221; modules and in the &#8220;intel&#8221; modules; the
&#8220;intel&#8221; module additonally give you the Intel compilers and debuggers.
Linking with MKL is a bit tricky and the exact link options varies from
version to version. Intel provides a webpage to build the correct
linking options at
<a class="reference external" href="https://software.intel.com/en-us/articles/intel-mkl-link-line-advisor">https://software.intel.com/en-us/articles/intel-mkl-link-line-advisor</a> .</p>
</div>
<div class="section" id="using-openblas">
<h3>Using OpenBLAS<a class="headerlink" href="#using-openblas" title="Permalink to this headline">¶</a></h3>
<p>OpenBLAS is installed on all the triton nodes on the default library
directory (/usr/lib64). 3 different variants of the library are
provided:</p>
<ul class="simple">
<li>Serial version: Link using &#8220;-lopenblas&#8221;</li>
<li>OpenMP version: Link using &#8220;-lopenblaso&#8221;</li>
<li>pthreads version: Link using &#8220;-lopenblasp&#8221;</li>
</ul>
</div>
<div class="section" id="other-blas-libraries">
<h3>Other BLAS libraries<a class="headerlink" href="#other-blas-libraries" title="Permalink to this headline">¶</a></h3>
<p>In general MKL and OpenBLAS are recommended since they both provide good
performance on all the node types we have. Other BLAS libraries
have various issues such as crashing when running on the incorrect node
(e.g. running an Haswell optimized library on an Westmer node or vice
versa), or poor performance. In particular, the Netlib reference BLAS
has <strong>VERY</strong> poor performance and should be avoided at all cost. Use it
only for testing or if you need to debug numeric output. As can be seen
on the <a class="reference external" href="LINK/Benchmarks">DGEMM benchmark results</a> performance for
large matrices is an order of magnitude worse than the optimized
versions. For a real example see for instance
<a class="reference external" href="http://tracker.triton.aalto.fi/issue194">tracker.triton.aalto.fi/issue194</a>
where 50% performance loss was seen for a complete application.</p>
</div>
</div>
<div class="section" id="lapack">
<h2>LAPACK<a class="headerlink" href="#lapack" title="Permalink to this headline">¶</a></h2>
<p><strong>L</strong>inear <strong>A</strong>lgebra <strong>Pack</strong>age (LAPACK) is a library of
numerical linear algebra algorithms, built on top of BLAS. The
recommended LAPACK implementation on triton is <strong>MKL</strong>.
Alternatively, our OpenBLAS modules and libraries also contain the
LAPACK library compiled agains the OpenBLAS BLAS library.</p>
</div>
<div class="section" id="scalapack">
<h2>Scalapack<a class="headerlink" href="#scalapack" title="Permalink to this headline">¶</a></h2>
<p>MKL contains an implementation of ScaLAPACK as well, please try to use
that one first. Again, see the BLAS section for how to link with MKL.</p>
<p>Benchmark is done with full Scalapack LIN/EIG testsuite with 24
processors. Scalapack is compiled with -O3 using architecture optimized
gotoblas2. Given numbers are WallClockTimes in seconds.</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Library</th>
<th class="head">Xeon processors</th>
<th class="head">Opteron processors</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Xeon-gcc optimized
scalapack</td>
<td>342s</td>
<td>-na-</td>
</tr>
<tr class="row-odd"><td>Opteron-gcc optimized
scalapack</td>
<td>338s</td>
<td>291s</td>
</tr>
<tr class="row-even"><td>Intel-compiler-mkl</td>
<td>-na-</td>
<td>-na-</td>
</tr>
</tbody>
</table>
<p>Scalapck libs are available under /share/apps/scalapack/2.0.1/</p>
</div>
<div class="section" id="fft">
<h2>FFT<a class="headerlink" href="#fft" title="Permalink to this headline">¶</a></h2>
<p>The FFTW library is available on triton, in several different variants.
The recommended one is the one provided by MKL; see the BLAS section
above for how to link to it.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="23%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Library</th>
<th class="head">module</th>
<th class="head">Link line</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>FFTW 3.2.1</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>-lfftw3 / -lfftw3_threads / -lfftw3f / -lfftw3f_threads / -lfftw3l / -lfftw3l_threads</td>
</tr>
<tr class="row-odd"><td>FFTW 3.3.2</td>
<td>fftw/3.3.2</td>
<td>-lfftw3 / -lfftw3_mpi</td>
</tr>
<tr class="row-even"><td>MKL</td>
<td>intel/VERSION or mkl/VERSION</td>
<td>See <a class="reference external" href="https://software.intel.com/en-us/articles/intel-mkl-link-line-advisor">https://software.intel.com/en-us/articles/intel-mkl-link-line-advisor</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>BLAS at <a class="reference external" href="https://www.netlib.org/blas">www.netlib.org/blas</a></li>
<li>LAPACK at <a class="reference external" href="https://www.netlib.org/lapack">www.netlib.org/lapack</a></li>
<li>GotoBLAS FAQ at
[www.tacc.utexas.edu/tacc-projects/gotoblas2/faq|http://www.tacc.utexas.edu/tacc-projects/gotoblas2/faq]</li>
<li>ACML User&#8217;s Guide (pdf file) at
<a class="reference external" href="https://developer.amd.com/assets/acml_userguide.pdf">developer.amd.com/assets</a></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="localstorage.html" class="btn btn-neutral float-right" title="Storage: local drives" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="jobs.html" class="btn btn-neutral" title="Monitoring jobs" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Aalto Science-IT.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/redirect-to-https.js"></script>
      <script type="text/javascript" src="https://users.aalto.fi/~darstr1/minipres-stable.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>